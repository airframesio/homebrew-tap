# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class DataArchiver < Formula
  desc "Archive database data to object storage with parallel processing. Currently supports PostgreSQL input and S3-compatible output."
  homepage "https://github.com/airframesio/data-archiver"
  version "1.2.2"
  license "MIT"

  depends_on "postgresql" => :optional

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/airframesio/data-archiver/releases/download/v1.2.2/data-archiver-1.2.2-darwin-amd64.tar.gz"
      sha256 "1c1da2c7ae2ece1b6127cb69caee907f4ea89f07d35118b89a6e61475eb783cf"

      def install
        bin.install "data-archiver"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/airframesio/data-archiver/releases/download/v1.2.2/data-archiver-1.2.2-darwin-arm64.tar.gz"
      sha256 "ce7dec9d591c70dd265116bf9887becb3eec002c65b4ff91e6b7594b07a8020f"

      def install
        bin.install "data-archiver"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/airframesio/data-archiver/releases/download/v1.2.2/data-archiver-1.2.2-linux-amd64.tar.gz"
      sha256 "b6c0afe0f1e7e9946dbd989a0cecac71621b2695a10c9b858fa930660b8d87cc"
      def install
        bin.install "data-archiver"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/airframesio/data-archiver/releases/download/v1.2.2/data-archiver-1.2.2-linux-arm64.tar.gz"
      sha256 "0f0d6a21774de6f3881bbd11c3b3c4dd5352b6db1b19708dc30e7df7ac86eba0"
      def install
        bin.install "data-archiver"
      end
    end
  end

  test do
    system "#{bin}/data-archiver", "--version"
    assert_match version.to_s, shell_output("#{bin}/data-archiver --version 2>&1")
  end
end
